{{ 'component-collection.css' | asset_url | stylesheet_tag }}

<div class="container mx-auto px-4 py-8">
  
  <!-- Collection Header -->
  <div class="text-center mb-12">
    <h1 class="text-4xl font-bold text-white mb-4">
      {{ 'sections.collection_template.title' | t }}: 
      {{- collection.title | escape -}}
    </h1>

    {%- if collection.description != blank -%}
      <div class="text-gray-400 max-w-2xl mx-auto">
        {{- collection.description -}}
      </div>
    {%- endif -%}
  </div>

  <!-- Products Grid - 3x2 Layout -->
  {%- paginate collection.products by 6 -%}
    {%- if collection.products.size == 0 -%}
      <!-- Empty Collection -->
      <div class="text-center py-16">
        <div class="bg-gray-800 rounded-lg p-12 max-w-md mx-auto">
          <h3 class="text-2xl font-bold text-white mb-4">
            {{ 'sections.collection_template.empty' | t }}
          </h3>
          <p class="text-gray-400">
            {{ 'sections.collection_template.use_fewer_filters_html' | t: link: collection.url, class: "underlined-link link" }}
          </p>
        </div>
      </div>
    {%- else -%}
      
      <!-- PRODUCTS GRID - 3 Columns, 2 Rows -->
      <div class="max-w-6xl mx-auto">
        
        <!-- ROW 1 - First 3 Products -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
          {%- for product in collection.products limit: 3 -%}
            {% assign lazy_load = false %}
            {%- if forloop.index > 2 -%}
              {%- assign lazy_load = true -%}
            {%- endif -%}
            
            <div class="bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-700 transition-all duration-300 hover:scale-105">
              {% render 'card-product',
                card_product: product,
                media_aspect_ratio: settings.image_ratio,
                image_shape: settings.image_shape,
                show_secondary_image: settings.show_secondary_image,
                show_vendor: settings.show_vendor,
                show_rating: settings.show_rating,
                lazy_load: lazy_load,
                show_quick_add: settings.enable_quick_add,
                section_id: 'collection-grid'
              %}
            </div>
          {%- endfor -%}
        </div>

        <!-- ROW 2 - Next 3 Products -->
        {%- if collection.products.size > 3 -%}
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {%- for product in collection.products offset: 3 limit: 3 -%}
              {% assign lazy_load = true %}
              
              <div class="bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-700 transition-all duration-300 hover:scale-105">
                {% render 'card-product',
                  card_product: product,
                  media_aspect_ratio: settings.image_ratio,
                  image_shape: settings.image_shape,
                  show_secondary_image: settings.show_secondary_image,
                  show_vendor: settings.show_vendor,
                  show_rating: settings.show_rating,
                  lazy_load: lazy_load,
                  show_quick_add: settings.enable_quick_add,
                  section_id: 'collection-grid'
                %}
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}

      </div>

      <!-- Pagination -->
      {%- if paginate.pages > 1 -%}
        <div class="mt-16">
          {% render 'pagination', paginate: paginate, anchor: '' %}
        </div>
      {%- endif -%}
      
    {%- endif -%}
  {%- endpaginate -%}
  
</div>

<!-- Custom CSS for Collection Grid -->
<style>
  .collection-grid-3x2 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .collection-grid-3x2 {
      grid-template-columns: repeat(3, 1fr);
    }
  }
  
  .collection-grid-3x2 > * {
    min-height: 400px;
  }
</style>